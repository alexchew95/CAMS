<!doctype html>
<html lang="en" dir="ltr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta http-equiv="Content-Language" content="en" />
	<meta name="msapplication-TileColor" content="#2d89ef">
	<meta name="theme-color" content="#4188c9">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<link rel="icon" href="./favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
	<!-- Generated: 2018-04-06 16:27:42 +0200 -->
	<title>LPTS - Add Package</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=latin-ext">
	<script src="./assets/js/require.min.js"></script>

	<script>
		requirejs.config({
			baseUrl: '.'
		});

	</script>
	<!-- Dashboard Core -->
	<link href="./assets/css/dashboard.css" rel="stylesheet" />
	<script src="./assets/js/dashboard.js"></script>

	<!-- jQuery Modal -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
	<!--Datatable CSS-->
	<link href="./assets/css/datatables.min.css" rel="stylesheet" />
	<!--JqueryUi CSS-->
	<link href="./assets/css/jquery-ui.min.css" rel="stylesheet" />

</head>

<body class="">
	<div class="page">
		<div class="page-main">
			<div class="header py-4">
				<div class="container" id="topbar">

				</div>
			</div>
			<div class="header collapse d-lg-flex p-0" id="headerMenuCollapse">
				<div class="container" id="navbar">

				</div>
			</div>

			<div class="my-3 my-md-5">
				<div class="container">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item">
								<a href="home.html">Home</a>
							</li>
							<li class="breadcrumb-item">
								<a href="package.html">Package</a>
							</li>
							<li class="breadcrumb-item active" aria-current="page">Add Package</li>
						</ol>
					</nav>
					<form>
						<!-- TOP ROW before Tabs-->
						<div class="form-horizontal">
							<div style="display:inline;">
								<table>
									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Package Name</label>
											</td>
											<td>
												<input type="text" class="form-control" id="packageName" autocomplete="off" required>
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Package Interest</label>
											</td>
											<td>
												<input type="number" class="form-control" id="packageInterest" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Profit 1 to 3 years</label>
											</td>
											<td>
												<input type="number" class="form-control" id="profit1to3" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Profit 4 to 10 years</label>
											</td>
											<td>
												<input type="number" class="form-control" id="profit4to10" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Min Tenure</label>
											</td>
											<td>
												<input type="number" class="form-control" id="minTenure" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Max Tenure</label>
											</td>
											<td>
												<input type="number" class="form-control" id="maxTenure" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Payout Pecentage</label>
											</td>
											<td>
												<input type="number" class="form-control" id="payoutPerc" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Minimum Age</label>
											</td>
											<td>
												<input type="number" class="form-control" id="minAge" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Maximum Age</label>
											</td>
											<td>
												<input type="number" class="form-control" id="maxAge" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Minimum Loan Amount</label>
											</td>
											<td>
												<input type="number" class="form-control" id="minLoanAmt" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Maximum Loan Amount</label>
											</td>
											<td>
												<input type="number" class="form-control" id="maxLoanAmt" autocomplete="off">
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<label class="form-label">Package Status</label>
											</td>
											<td>
												<input type="text" class="form-control" id="packageStatus" autocomplete="off" required>
											</td>
										</tr>
									</div>

									<div class="form-group">
										<tr>
											<td>
												<button class="btn btn-primary" id="btnAddPackage">Add</button>
												<button class="btn btn-primary" id="btnCloseAddNewPackage">Close</button>
											</td>
										</tr>
									</div>

								</table>

								<div class="form-group">
									<label id="lblMessages" class="text-danger"></label>
								</div>
							</div>
						</div>
						<br>
					</form>
				</div>


			</div>


		</div>

	</div>

	<div class="footer">

	</div>
	<footer class="footer">
		<div class="container">
			<div class="row align-items-center flex-row-reverse">
				<div class="col-auto ml-lg-auto">
					<div class="row align-items-center">
						<!-- <div class="col-auto">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item">
                    <a href="./docs/index.html">Documentation</a>
                  </li>
                  <li class="list-inline-item">
                    <a href="./faq.html">FAQ</a>
                  </li>
                </ul>
              </div> -->
						<!-- <div class="col-auto">
                <a href="https://github.com/tabler/tabler" class="btn btn-outline-primary btn-sm">Source code</a>
              </div> -->
					</div>
				</div>
				<div class="col-12 col-lg-auto mt-3 mt-lg-0 text-center">
					Copyright Â© 2018
					<a href=".">LPTS Sdn Bhd</a>. Theme by
					<a href="https://tentspark.com" target="_blank">tenstpark</a> All rights reserved.
				</div>
			</div>
		</div>
	</footer>
	</div>

	<script type="text/javascript">
		/////* Declare variables */////
		
		token = sessionStorage.getItem("token");
		require(['mainjs','modal'], function () {
			function resetModalTextbox() {
				$('input[type="text"]').val('');
				$('input[type="number"]').val('');
				$('.custom-select').val('');
			}
			
			$("#btnCloseAddNewPackage").click(function (event) {
				window.location = "package.html";
			});

			$("#btnAddPackage").click(function (event) {
				event.preventDefault();

				var inpPackageName = document.getElementById("packageName")
				var inpPackageStatus = document.getElementById("packageStatus")

				if (inpPackageName.checkValidity() && inpPackageStatus.checkValidity()) {

					$.ajax({
						url: APIUrl + 'add_package',
						type: 'POST',
						beforeSend: function (xhr) { //Include the bearer token in header
							xhr.setRequestHeader("Authorization", token);
						},
						data: {
							"packageName": $("#packageName").val(),
							"packageInterest": $("#packageInterest").val(),
							"profit1to3": $("#profit1to3").val(),
							"profit4to10": $("#profit4to10").val(),
							"minTenure": $("#minTenure").val(),
							"maxTenure": $("#maxTenure").val(),
							"payoutPerc": $("#payoutPerc").val(),
							"minAge": $("#minAge").val(),
							"maxAge": $("#maxAge").val(),
							"minLoanAmt": $("#minLoanAmt").val(),
							"maxLoanAmt": $("#maxLoanAmt").val(),
							"packageStatus": $("#packageStatus").val(),
						},
						dataType: 'JSON',
						success: function (data) {
							resetModalTextbox();
						},
						error: function (xhr, ajaxOptions, thrownError) {
							var errorMsg = 'Ajax request failed: ' + xhr.responseText;
							//console.log(errorMsg);
						}
					});
				}

				else if(inpPackageName.checkValidity() && !inpPackageStatus.checkValidity()){
					$("#lblMessages").text("Please fill up for Package Status");
				}
				else if(!inpPackageName.checkValidity() && inpPackageStatus.checkValidity()){
					$("#lblMessages").text("Please fill up for Package Name");
				}
				else{
					$("#lblMessages").text("Please fill up for Package Name and Package Status");
				}
			});
		});

		$(document).ready(function () {
			// Load datepicker
			require(['jquery', 'jqueryui'], function ($) {
				$(function () {
					var d = new Date().getDate();
					var m = new Date().getMonth() + 1; // JavaScript months are 0-11
					var y = new Date().getFullYear();
					$("[id$=EntryDate]").val(y + "-" + m + "-" + d);
					$("[id$=EntryDate]").datepicker({
						weekStart: 1,
						dateFormat: 'yy-mm-dd'
					});

					$(".datepicker").datepicker({
						changeMonth: true,
						changeYear: true,
						dateFormat: 'yy-mm-dd',
						yearRange: '1900:' + y
					});
				});
			});

			var name = sessionStorage.getItem("name");
			var userId = sessionStorage.getItem("userId");
			$("#MarketingOfficer").attr("placeholder", name);
			$("#MarketingOfficerId").val(userId);


		});

	</script>
</body>

</html>
