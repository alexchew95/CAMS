<!doctype html>
<html lang="en" dir="ltr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta http-equiv="Content-Language" content="en" />
	<meta name="msapplication-TileColor" content="#2d89ef">
	<meta name="theme-color" content="#4188c9">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<link rel="icon" href="./favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
	<!-- Generated: 2018-04-06 16:27:42 +0200 -->
	<title>LPTS - Add Customer</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=latin-ext">
	<script src="./assets/js/require.min.js"></script>

	<script>
		requirejs.config({
			baseUrl: '.'
		});

	</script>
	<!-- Dashboard Core -->
	<link href="./assets/css/dashboard.css" rel="stylesheet" />
	<script src="./assets/js/dashboard.js"></script>

	<!-- jQuery Modal -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
	<!--Datatable CSS-->
	<link href="./assets/css/datatables.min.css" rel="stylesheet" />
	<!--JqueryUi CSS-->
	<link href="./assets/css/jquery-ui.min.css" rel="stylesheet" />

</head>

<body class="">
	<div class="page">
		<div class="page-main">
			<div class="header py-4">
				<div class="container" id="topbar">

				</div>
			</div>
			<div class="header collapse d-lg-flex p-0" id="headerMenuCollapse">
				<div class="container" id="navbar">

				</div>
			</div>

			<div class="my-3 my-md-5">
				<div class="container">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item">
								<a href="home.html">Home</a>
							</li>
							<li class="breadcrumb-item">
								<a href="customer.html">Customer</a>
							</li>
							<li class="breadcrumb-item active" aria-current="page">Add Customer</li>
						</ol>
					</nav>
					<form>
						<!-- TOP ROW before Tabs-->
						<div class="form-horizontal">
							<div style="display:inline;">
								<table>
									<div class="col-sm-12 col-md-12">
										<div class="form-group">
											<tr>
												<td>
													<label class="col-form-label float-right">Name*</label>
												</td>
												<td>
													<input type="text" id="Name" class="form-control" autocomplete="off" maxlength="100" required>
												</td>
											</tr>
										</div>
									</div>

									<div class="col-sm-12 col-md-12">
										<div class="form-group">
											<tr>
												<td>
													<label class="col-form-label float-right">Marketing Officer* </label>
												</td>
												<td>
													<select type="form-control custom-select" class="form-control" id="nameMarketingOfficer" maxlength="100" required>
														<option value="">Select Marketing Officer first</option>
													</select>

												</td>
											</tr>
										</div>
									</div>

									<div class="col-sm-12 col-md-12">
										<div class="form-group">
											<tr>
												<td>
													<label class="col-form-label float-right">Package* </label>
												</td>
												<td id="ddPackage">


													<script type="text/javascript">
														function getSelectedPackageData() {

															var selectedPackageId = $("#Package").val()


															$.ajax({

																url: APIUrl + 'loadPackage',
																type: 'POST',
																dataType: 'JSON',
																beforeSend: function (xhr) { //Include the bearer token in header
																	xhr.setRequestHeader("Authorization", token);
																},
																data: {
																	"packageId": selectedPackageId,
																},
																success: function (data) {
																	data.forEach(function (data) {



																		minTenure = data.minTenure //tenure
																		maxTenure = data.maxTenure //tenure
																		minAge = data.minAge
																		maxAge = data.maxAge
																		minLoanAmt = data.minLoanAmt
																		maxLoanAmt = data.maxLoanAmt



																	});
																	//	$(".custom-loader").hide();
																}
															});
														}

													</script>

												</td>
											</tr>
										</div>
									</div>
								</table>
							</div>
						</div>
						<br>
						<!-- Scripts to handle JS-->
						<script type="text/javascript">
							$(document).ready(function () {
								$(".tab-content").show(); //Hide all content
								$("ul.tabs li").eq(1).addClass("active").show(); //Activate second tab
								$(".tab-content").eq(1).show(); //Show second tab content


								$('#tabAll').click(function () {
									console.log("SHOW");
									$('#tabAll').addClass('active');
									$('.tab-pane').each(function (i, t) {
										$('#myTab li').removeClass('active');
										$(this).addClass('active');
									});
								});

							});

							function ResetActive(id) {
								data = ['personal', 'work', 'deduction', 'loan', 'package', 'redemption', 'remark'];
								data.forEach(function (i, v) {
									if (id != i) {
										console.log(id + " ? ? " + i);
										$('#' + i).removeClass('active');
									} else {
										$('#' + i).addClass('active');
									}

								});
							}

						</script>
						<div class="tabbable" id="myTab">
							<!-- Tabs Header Row -->
							<ul class="nav nav-tabs responsive-tabs" style="font-size:1.25rem;justify-content:center;">
								<li>
									<a href="#" id="tabAll" data-toggle="tab" class="nav-item text-dark">All</a>
								</li>
								<li id="liPersonal">
									<a href="#Personal" data-toggle="tab" class="nav-item text-dark" onclick="ResetActive('personal')">Personal</a>
								</li>
								<li id="liWork">
									<a href="#Work" data-toggle="tab" class="nav-item text-dark" onclick="ResetActive('work')">Work</a>
								</li>
								<li id="liSalaryAndDeduction">
									<a href="#SalaryAndDeduction" data-toggle="tab" class="nav-item text-dark" onclick="ResetActive('deduction')">Salary & Deduction</a>
								</li>
								<li id="liLoan">
									<a href="#Loan" data-toggle="tab" class="nav-item text-dark" onclick="ResetActive('loan')">Loan</a>
								</li>
								<li id="liRedemption">
									<a href="#Redemption" data-toggle="tab" class="nav-item text-dark" onclick="ResetActive('redemption')">Redemption</a>
								</li>
								<li id="liRemark">
									<a href="#Remark" data-toggle="tab" class="nav-item text-dark" onclick="ResetActive('remark')">Remark</a>
								</li>
							</ul>

							<div class="tab-content">
								<div class="tab-pane active" id="personal">
									<br>
									<div>
										<div class="row">
											<div class="col-md-6">
												<legend>General</legend>
												<table>
													<div class="form-horizontal">
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Status*</label>
																	</td>
																	<td>
																		<select id="Status" class="form-control" size="1">
																			<option value="">- Select One -</option>
																			<option value="ST_PND" selected="selected">Pending</option>
																			<option value="ST_PRO">Processed</option>
																			<option value="ST_APPV">Approved</option>
																			<option value="ST_DIS">Disbursed</option>
																			<option value="ST_REJ">Rejected</option>
																		</select>
																	</td>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Entry Date*</label>
																	</td>

																	<td>
																		<input id="EntryDate" disabled="disabled" class="form-control datepicker" required>
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">IC No.*</label>
																	</td>

																	<td>
																		<input type="number" id="ICNo" class="form-control" autocomplete="off" maxlength="20" required>
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Old IC No.</label>
																	</td>

																	<td>
																		<input type="text" id="OldICNo" class="form-control" autocomplete="off" maxlength="20">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Date Of Birth*</label>
																	</td>

																	<td>
																		<input type="text" id="DateOfBirth" class="form-control datepicker" autocomplete="off" required>
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Gender</label>
																	</td>

																	<td>
																		<select id="Gender" class="form-control" size="1">
																			<option value="">- Select One -</option>
																			<option value="M">Male</option>
																			<option value="F">Female</option>
																		</select>
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Mobile Phone No.</label>
																	</td>

																	<td>
																		<input type="text" id="MobilePhoneNo" class="form-control" autocomplete="off" maxlength="50">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Email</label>
																	</td>

																	<td>
																		<input type="text" id="customerEmail" class="form-control" autocomplete="off" maxlength="100">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Next Contact Name</label>
																	</td>

																	<td>
																		<input type="text" id="NextContactName" class="form-control" autocomplete="off" maxlength="100">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Next Contact Relationship</label>
																	</td>

																	<td>
																		<input type="text" id="NextContactRelationship" class="form-control" autocomplete="off" maxlength="20">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Next Contact Phone No.</label>
																	</td>

																	<td>
																		<input type="text" id="NextContactPhoneNo" class="form-control" autocomplete="off" maxlength="50">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Next Contact Office Phone No.</label>
																	</td>

																	<td>
																		<input type="text" id="NextContactOfficePhoneNo" class="form-control" autocomplete="off" maxlength="50">
																	</td>
																</tr>
															</div>
														</div>
													</div>
												</table>
											</div>
											<div class="col-md-6">
												<legend>Home Address</legend>
												<table>
													<div class="form-horizontal">
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Line 1</label>
																	</td>

																	<td>
																		<input type="text" id="HomeAddressLine1" class="form-control" autocomplete="off" maxlength="150">
																	</td>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Line 2</label>
																	</td>

																	<td>
																		<input type="text" id="HomeAddressLine2" class="form-control" autocomplete="off" maxlength="150">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">City</label>
																	</td>

																	<td>
																		<input type="text" id="HomeAddressCity" class="form-control" autocomplete="off" maxlength="100">
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Post Code</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="HomeAddressPostCode" class="form-control" autocomplete="off" maxlength="5" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">State</label>
																	</td>

																	<td>
																		<select id="HomeAddressState" class="form-control" size="1">
																			<option value="">- Select One -</option>
																			<option value="JHR">Johor</option>
																			<option value="KDH">Kedah</option>
																			<option value="KLT">Kelantan</option>
																			<option value="WPK">Kuala Lumpur</option>
																			<option value="MLK">Melaka</option>
																			<option value="NGS">Negeri Sembilan</option>
																			<option value="PHG">Pahang</option>
																			<option value="PRK">Perak</option>
																			<option value="PLS">Perlis</option>
																			<option value="PPG">Pulau Pinang</option>
																			<option value="SBH">Sabah</option>
																			<option value="SWK">Sarawak</option>
																			<option value="SLG">Selangor</option>
																			<option value="TRG">Terengganu</option>
																			<option value="WPL">Labuan</option>
																			<option value="WPP">Putrajaya</option>
																		</select>
																	</td>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Home Phone No.</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="HomePhoneNo" class="form-control" autocomplete="off" maxlength="50">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
													</div>
												</table>
											</div>
										</div>
									</div>

								</div>
								<div class="tab-pane" id="work">
									<br>
									<div>
										<div class="row">
											<div class="col-md-6">
												<div class="form-horizontal">
													<legend>Company Details</legend>
													<table>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Company Name*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="CompanyName" class="form-control" autocomplete="off" maxlength="100" required>
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Position</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="Position" class="form-control" autocomplete="off" maxlength="100">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Office Phone No.</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="OfficePhoneNo" class="form-control" autocomplete="off" maxlength="50">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Fax Phone No.</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="FaxPhoneNo" class="form-control" autocomplete="off" maxlength="50">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
													</table>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-horizontal">
													<legend>Company Address</legend>
													<table>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Line 1</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="CompanyAddressLine1" class="form-control" autocomplete="off" maxlength="150">
																		</td>
																	</div>
																</tr>
															</div>
														</div>


														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Line 2</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="CompanyAddressLine2" class="form-control" autocomplete="off" maxlength="150">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">City</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="CompanyAddressCity" class="form-control" autocomplete="off" maxlength="100">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Post Code</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="CompanyAddressPostCode" class="form-control" autocomplete="off" maxlength="5" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">State</label>
																	</td>

																	<div class="controls">
																		<td>
																			<select id="CompanyAddressState" class="form-control" size="1">
																				<option value="">- Select One -</option>
																				<option value="JHR">Johor</option>
																				<option value="KDH">Kedah</option>
																				<option value="KLT">Kelantan</option>
																				<option value="WPK">Kuala Lumpur</option>
																				<option value="MLK">Melaka</option>
																				<option value="NGS">Negeri Sembilan</option>
																				<option value="PHG">Pahang</option>
																				<option value="PRK">Perak</option>
																				<option value="PLS">Perlis</option>
																				<option value="PPG">Pulau Pinang</option>
																				<option value="SBH">Sabah</option>
																				<option value="SWK">Sarawak</option>
																				<option value="SLG">Selangor</option>
																				<option value="TRG">Terengganu</option>
																				<option value="WPL">Labuan</option>
																				<option value="WPP">Putrajaya</option>
																			</select>
																		</td>
																	</div>
																</tr>
															</div>
														</div>

													</table>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="tab-pane" id="deduction">
									<br>
									<div>
										<div class="form-horizontal">
											<legend>Salary Details</legend>
											<table>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">Salary (RM)*</label>
															</td>

															<div class="controls">
																<td>
																	<input type="number" id="Salary" class="form-control" autocomplete="off" placeholder="0.00" required step="0.01">
																</td>
															</div>
														</tr>
													</div>
												</div>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">Allowance (RM)</label>
															</td>

															<div class="controls">
																<td>
																	<input type="number" id="Allowance" class="form-control" autocomplete="off" placeholder="0.00" step="0.01">
																</td>
															</div>
														</tr>
													</div>
												</div>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">Deduction (RM)*</label>
															</td>

															<div class="controls">
																<td>
																	<input type="number" id="Deduction" class="form-control" autocomplete="off" step="0.01" required>
																</td>
															</div>
														</tr>
													</div>
												</div>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">In Transit (RM)</label>
															</td>

															<div class="controls">
																<td>
																	<input type="number" id="InTransit" class="form-control" autocomplete="off" placeholder="0.00" step="0.01">
																</td>
															</div>
														</tr>
													</div>
												</div>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">Amount Booked (RM)</label>
															</td>

															<div class="controls">
																<td>
																	<input type="number" id="AmountBooked" class="form-control" autocomplete="off" placeholder="0.00" step="0.01">
																</td>
															</div>
														</tr>
													</div>
												</div>


												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">Payslip Month</label>
															</td>

															<div class="controls">
																<td>
																	<input type="text" id="PayslipMonth" class="form-control datepicker" autocomplete="off">
																</td>
															</div>
														</tr>
													</div>
												</div>

											</table>

											<!-- <legend>Deduction</legend>
											<button class="btn btn-info" id="Deduction" data-loading-text>Add Deduction</button>

											<legend>Deduction Finished</legend>
											<button class="btn btn-info" id="DeductionFinished" data-loading-text>Add Deduction Finished</button>
 -->
										</div>
									</div>
								</div>
								<div class="tab-pane" id="loan">
									<br>
									<div>
										<div class="row">
											<div class="col-md-6">

												<div class="form-horizontal">
													<legend>Loan Details</legend>
													<table>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Loan Applied (RM)*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input onchange="calcInstallment()" type="number" id="LoanApplied" class="form-control" autocomplete="off" placeholder="0.00"
																			 required step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Tenure (Month)*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input onchange="calcInstallment()" type="number" id="Tenure" class="form-control" autocomplete="off" required>
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Installment (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="Installment" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Eligible Deduction (%)*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<select id="EligibleDeduction" class="form-control" size="1">
																				<option value="0">- Select One -</option>
																				<option value="1">60</option>
																				<option value="2">50</option>
																				<option value="2">40</option>
																			</select>
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Agent Commission (RM)*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="AgentCommission" class="form-control" autocomplete="off" placeholder="0.00" required step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Profit Rate (%)*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" max="100" id="ProfitRate" class="form-control" autocomplete="off" required step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>
														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Approval Code</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="ApprovalCode" class="form-control" autocomplete="off" maxlength="20">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Loan Approved (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="LoanApproved" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Invoice Amount (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="InvoiceAmount" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Approval Date</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="ApprovalDate" class="form-control datepicker" autocomplete="off">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Net Loan Approved (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="NetLoanApproved" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Settle Own Loan (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="SettleOwnLoan" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Marketing Officer Advance (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="MarketingOfficerAdvance" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Company Advance (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="CompanyAdvance" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

													</table>
												</div>
											</div>
											<div class="col-md-6">

												<div class="form-horizontal">
													<legend>Disbursment Details</legend>
													<table>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Commission Deduction Amount (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="CommissionDeductionAmount" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Bank*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<select id="Bank" class="form-control" size="1">
																				<option value="">- Select One -</option>
																				<option value="1">Affin Bank</option>
																				<option value="2">Al Rajhi Bank</option>
																				<option value="3">Alliance Bank</option>
																				<option value="4">Am Bank</option>
																				<option value="5">Bank Mualamat</option>
																				<option value="6">CIMB Bank</option>
																				<option value="7">Bank Simpanan Nasional</option>
																				<option value="8">EON Bank</option>
																				<option value="9">CitiBank</option>
																				<option value="10">HSBC Bank</option>
																				<option value="11">Hong Leong Bank</option>
																				<option value="12">Maybank</option>
																				<option value="13">OCBC Bank</option>
																				<option value="14">Public Bank</option>
																				<option value="15">RHB Bank</option>
																				<option value="16">Standard Chartered Bank</option>
																				<option value="17">United Overseas Bank (UOB)</option>
																				<option value="18">Maybank Finance</option>
																				<option value="19">Public Finance</option>
																				<option value="20">Bank Rakyat</option>
																				<option value="21">AM Finance</option>
																				<option value="22">Bank Persatuan</option>
																				<option value="23">Agro Bank (Bank Pertanian Malaysia)</option>
																				<option value="24">Bank Islam</option>
																				<option value="25">Tabung Haji</option>
																				<option value="26">Bank Pertanian Malaysia</option>
																				<option value="27">MBSB</option>
																			</select>
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Bank In Name</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="BankInName" class="form-control" autocomplete="off" maxlength="100">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Account No.*</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="AccountNo" class="form-control" autocomplete="off" maxlength="20" required>
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Bank In Ammount (RM)</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="number" id="BankInAmount" class="form-control" autocomplete="off" step="0.01">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Bank In Date</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="BankInDate" class="form-control datepicker" autocomplete="off">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Cheque No.</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="BankChequeNo" class="form-control" autocomplete="off" maxlength="20">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Reconciliation Date</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="ReconciliationDate" class="form-control datepicker" autocomplete="off">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Date To Bank</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="DateToBank" class="form-control datepicker" autocomplete="off">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

														<div style="display:inline;">
															<div class="form-inline form-group">
																<tr>
																	<td>
																		<label class="control-label required disabled float-right">Bank Reference</label>
																	</td>

																	<div class="controls">
																		<td>
																			<input type="text" id="BankReference" class="form-control" autocomplete="off" maxlength="10">
																		</td>
																	</div>
																</tr>
															</div>
														</div>

													</table>

												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="tab-pane" id="redemption">
									<br>
									<div>
										<div class="form-horizontal">
											<legend>Redemption Details</legend>
											<table id="redemption_table">

												<div style="display:inline;">
													<div class="form-inline form-group" id=redemptionContaioner>
														<thead>
															<tr>
																<div class="container1">
																	<td>
																	</td>
																	<td>
																		<label class="control-label required disabled float-left">Code</label>
																	</td>
																	<td>
																		<label class="control-label required disabled float-left">Bank / Coop / Organisation*</label>
																	</td>
																	<td>
																		<label class="control-label required disabled float-left">Details</label>
																	</td>
																	<td>
																		<label class="control-label required disabled float-left">Amount*</label>
																	</td>
																	<td>
																		<label class="control-label required disabled float-left">Expired Date*</label>
																	</td>
																	<td>
																		<label class="control-label required disabled float-left">Status*</label>
																	</td>
																	<td>
																		&ensp; &ensp;
																	</td>
																	<td>
																		<button class="btn btn-info" id="addRedemption" data-loading-text>Add Redemption</button>
																	</td>
																</div>
															</tr>
														</thead>
														<tbody>
															<tr>

															</tr>
														</tbody>
													</div>
												</div>
											</table>
											<br>
											<button class="btn btn-warning" id="deleteRedemption" data-loading-text>Delete</button>
										</div>
									</div>
								</div>
								<div class="tab-pane" id="remark">
									<br>
									<div>
										<div class="form-horizontal">
											<table>

												<legend>Remark</legend>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">Attention</label>
															</td>

															<div class="controls">
																<td>
																	<input name='attentionT' type="radio" id="Attention_MarketingOfficer" autocomplete="off" value="MOfficer" checked="checked">
																	<label>Marketing Officer</label>
																</td>
															</div>
														</tr>
														<tr>
															<td></td>
															<div class="controls">

																<td>
																	<input name='attentionT' type="radio" id="Attention_Company" autocomplete="off" value="BUSOWN">
																	<label>Company</label>
																</td>
															</div>
														</tr>

													</div>
												</div>

												<div style="display:inline;">
													<div class="form-inline form-group">
														<tr>
															<td>
																<label class="control-label required disabled float-right">New Remark</label>
															</td>

															<div class="controls">
																<td>
																	<textarea type="text" id="NewRemark" class="form-control" autocomplete="off"></textarea>
																</td>
															</div>
														</tr>
													</div>
												</div>
											</table>

										</div>
									</div>
								</div>

							</div>

							<div class="container">
								<br>
								<div class="row">
									<!-- <button class="btn btn-warning" id="Calculate" data-loading-text>Calculate</button>
									&nbsp; &nbsp; -->
									<button class="btn btn-primary" id="SaveAndStay" data-loading-text>Save & Stay</button>
									&nbsp; &nbsp;
									<button class="btn btn-primary" id="Save" type="button" data-loading-text>Save</button>
									&nbsp; &nbsp;
									<button class="btn btn-white" id="Cancel" data-loading-text>Cancel</button>
								</div>
								<label id="lblMessages" class="text-danger"></label>
							</div>
						</div>
					</form>
				</div>


			</div>


		</div>

	</div>

	<div class="footer">

	</div>
	<footer class="footer">
		<div class="container">
			<div class="row align-items-center flex-row-reverse">
				<div class="col-auto ml-lg-auto">
					<div class="row align-items-center">
						<!-- <div class="col-auto">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item">
                    <a href="./docs/index.html">Documentation</a>
                  </li>
                  <li class="list-inline-item">
                    <a href="./faq.html">FAQ</a>
                  </li>
                </ul>
              </div> -->
						<!-- <div class="col-auto">
                <a href="https://github.com/tabler/tabler" class="btn btn-outline-primary btn-sm">Source code</a>
              </div> -->
					</div>
				</div>
				<div class="col-12 col-lg-auto mt-3 mt-lg-0 text-center">
					Copyright © 2018
					<a href=".">LPTS Sdn Bhd</a>. Theme by
					<a href="https://tentspark.com" target="_blank">tenstpark</a> All rights reserved.
				</div>
			</div>
		</div>
	</footer>
	</div>

	<script type="text/javascript">
		/////* Declare variables */////
		var stay = true, // to change window location if set as false
			highestCount = 0, // to store the highest count of the redemption
			redemption_count = 0,
			max_redemption_count = 5,
			totalRedemptionCode = [],
			totalRedemptionBankCoopOrg = [],
			totalRedemptionDetails = [],
			totalRedemptionAmount = [],
			totalRedemptionExpiredDate = [],
			totalRedemptionStatus = [],
			statusDD;

		token = sessionStorage.getItem("token");
		require(['mainjs', 'jquery'], function () {
			function test() {
				selectedPackageId = this.options[this.selectedIndex].id
				console.log(selectedPackageId)
			}
			$("#SaveAndStay").click(function (event) {
				buttonRoleControl();
				event.preventDefault();
				stay = true;
				if (checkValidity()) {
					if (checkPackageValidity()) {
						setRedemptionArray();
						addCustomer();
					}
				}
			});

			$("#Save").click(function (event) {
				buttonRoleControl();
				stay = false;
				if (checkValidity()) {
					if (checkPackageValidity()) {
						setRedemptionArray();
						addCustomer();
					}
				}
			});

			$("#Cancel").click(function (event) {
				event.preventDefault();
				window.location = "customer.html";
			});

			$("#addRedemption").click(function (event) {
				event.preventDefault();
				redemptionField();
			});

			$('body').on('focus', ".datepicker_recurring_start", function () {
				$(this).datepicker();
			});

			function redemptionField() {
				var redemption_container = "",
					redemption_counter;
				if (redemption_count < max_redemption_count) {
					redemption_count++;
					redemption_container += '<tr><td><input type="checkbox" name="redemption_record"></td>' +
						'<div class="controls"><td>' +
						'<input type="text" id="RedemptionCode" class="form-control" autocomplete="off" maxlength="20">' +
						'</td></div>' +
						'<div class="controls"><td>' +
						'<input type="text" id="RedemptionBankCoopOrg" class="form-control" autocomplete="off" maxlength="100" required>' +
						'</td></div>' +
						'<div class="controls"><td>' +
						'<input type="text" class="form-control" rows="1" id="RedemptionDetails">' +
						'</td></div>' +
						'<div class="controls"><td>' +
						'<input type="number" id="RedemptionAmount" class="form-control" autocomplete="off" step="0.01" required>' +
						'</td></div>' +
						'<div class="controls"><td>' +
						'<input type="text" id="RedemptionExpiredDate" class="form-control datepicker_recurring_start" required>' +
						'</td></div>' +
						'<div class="controls"><td>' +
						'<select type="form-control custom-select" class="form-control" id="RedemptionStatus" maxlength="100" required>' +
						statusDD +
						'</td></div></tr>';
					$("#redemption_table > tbody").append(redemption_container); //add input box
					for (redemption_counter = 1; redemption_counter <= redemption_count; redemption_counter++) {
						if (!(document.getElementById("RedemptionCode" + redemption_counter))) {
							$('#RedemptionCode').attr("id", "RedemptionCode" + redemption_counter);
							$('#RedemptionBankCoopOrg').attr("id", "RedemptionBankCoopOrg" + redemption_counter);
							$('#RedemptionDetails').attr("id", "RedemptionDetails" + redemption_counter);
							$('#RedemptionAmount').attr("id", "RedemptionAmount" + redemption_counter);
							$('#RedemptionExpiredDate').attr("id", "RedemptionExpiredDate" + redemption_counter);
							$('#RedemptionStatus').attr("id", "RedemptionStatus" + redemption_counter);
							break;
						}
					}
					if (highestCount < redemption_counter) {
						highestCount = redemption_counter;
					}
				}
				else {
					$("#lblMessages").text('You have reached the limits. Maximum count is 5');
				}
			}

			$("#deleteRedemption").click(function (event) {
				event.preventDefault();
				$("table tbody").find('input[name="redemption_record"]').each(function () {
					if ($(this).is(":checked")) {
						$(this).parents("tr").remove();
						redemption_count--;
					}
				});
			});

			function checkPackageValidity() {
				packageFlag = true;
				//customer details-start
				currentLoanApplied = parseInt($("#LoanApplied").val())
				currentTenure = parseInt($("#Tenure").val())
				dob = new Date($("#DateOfBirth").val())
				var diff_ms = Date.now() - dob.getTime();
				var age_dt = new Date(diff_ms);
				age = Math.abs(age_dt.getUTCFullYear() - 1970); //don't have to convert. it is int
				//customer details end
				errorPackageMessage = "";

				if (currentTenure > parseInt(maxTenure)) {
					errorPackageMessage += "Current tenure exceed maximum tenure.";

					packageFlag = false;
				}
				if (currentTenure < parseInt(minTenure)) {
					errorPackageMessage += "/	Current tenure is less than minimum tenure.";
					packageFlag = false;
				}
				if (age > parseInt(maxAge)) {
					errorPackageMessage += "/	Customer age exceed maximum allowed age.";
					packageFlag = false;
				}
				if (age < parseInt(minAge)) {
					errorPackageMessage += "/	Customer age is less than minimum allowed age.";
					packageFlag = false;
				}
				if (currentLoanApplied > parseInt(maxLoanAmt)) {
					errorPackageMessage += "/	Current loan applied exceed maximum loan amount.";

					packageFlag = false;
				}
				if (currentLoanApplied < parseInt(minLoanAmt)) {
					errorPackageMessage += "/	Current loan applied is less than minimum loan allowed.";
					packageFlag = false;
				}
				$("#lblMessages").text(errorPackageMessage);

				return packageFlag;

				//	console.log(	minTenure,maxTenure,maxAge,minLoanAmt,maxLoanAmt);
			}

			function checkValidity() {
				data = ["Name", "nameMarketingOfficer", "Package", "Status", "EntryDate", "ICNo", "DateOfBirth", "CompanyName",
					"Salary", "Deduction", "EligibleDeduction", "LoanApplied", "AgentCommission", "Tenure", "ProfitRate", "Bank",
					"AccountNo"
				];
				reqField_data = ["Name", "Marketing Officer", "Package", "Status", "Entry Date", "IC No", "Date Of Birth",
					"Company Name",
					"Salary", "Deduction", "Eligible Deduction", "Loan Applied", "Agent Commission", "Tenure", "Profit Rate",
					"Bank", "AccountNo"
				];
				redemption_data = ["RedemptionBankCoopOrg", "RedemptionAmount", "RedemptionExpiredDate", "RedemptionStatus"];

				reqField_redemption_data = ["Redemption Bank/Coop/Org", "Redemption Amount", "Redemption Expired Date",
					"Redemption Status"
				];

				var datalength,
					comma = true,
					validInp = true,
					reqField = "",
					inp,
					inpValue;

				/* Checking for require field excluding redemption*/
				datalength = data.length;
				for (var i = 0; i < datalength; i++) {
					inp = document.getElementById(data[i]);
					if ((data[i] == "Package") || (data[i] == "Status") || (data[i] == "EligibleDeduction") || (data[i] == "Bank") ||
						(data[i] == "nameMarketingOfficer")) {
						inpValue = document.getElementById(data[i]).value;
						if (inpValue == 0) {
							if (comma) {
								reqField += (reqField_data[i]);
								comma = false;
								validInp = false;
							} else {
								reqField += (", " + reqField_data[i]);
							}
						}
					} else {
						if (!inp.checkValidity()) {
							if (comma) {
								reqField += (reqField_data[i]);
								comma = false;
								validInp = false;
							} else {
								reqField += (", " + reqField_data[i]);
							}
						}
					}
				}

				/* Checking for redemption field*/
				datalength = redemption_data.length
				for (var i = 0; i < datalength; i++) {
					for (var j = 1; j <= highestCount; j++) {
						if (document.getElementById(redemption_data[i] + j)) {
							inpValue = document.getElementById(redemption_data[i] + j).value;
							if (inpValue == 0) {
								if (comma) {
									reqField += (reqField_redemption_data[i]);
									comma = false;
									validInp = false;
									break;
								} else {
									reqField += (", " + reqField_redemption_data[i]);
									break;
								}
							}
						}
					}
				}

				if (validInp == false) {
					$("#lblMessages").text("Please fill up for " + reqField);
				} else {
					$("#lblMessages").text("");
				}
				return validInp;
			}

			function setRedemptionArray() {
				let j = 0;
				for (var i = 1; i <= highestCount; i++) {
					if (document.getElementById("RedemptionCode" + i)) {
						totalRedemptionCode[j] = $("#RedemptionCode" + i).val();
						totalRedemptionBankCoopOrg[j] = $("#RedemptionBankCoopOrg" + i).val();
						totalRedemptionDetails[j] = $("#RedemptionDetails" + i).val();
						totalRedemptionAmount[j] = $("#RedemptionAmount" + i).val();
						totalRedemptionExpiredDate[j] = $("#RedemptionExpiredDate" + i).val();
						totalRedemptionStatus[j] = $("#RedemptionStatus" + i).val();
						j++;
					}
				}
			}


			function addCustomer() {
				caseCreated = "Case created";
				var jsonString_RedemptionCode = JSON.stringify(totalRedemptionCode),
					jsonString_RedemptionBankCoopOrg = JSON.stringify(totalRedemptionBankCoopOrg),
					jsonString_RedemptionDetails = JSON.stringify(totalRedemptionDetails),
					jsonString_RedemptionAmount = JSON.stringify(totalRedemptionAmount),
					jsonString_RedemptionExpiredDate = JSON.stringify(totalRedemptionExpiredDate),
					jsonString_RedemptionStatus = JSON.stringify(totalRedemptionStatus);

				if (document.getElementById('Attention_MarketingOfficer').checked) {
					attentionTo = document.getElementById("Attention_MarketingOfficer").value;
				}
				if (document.getElementById('Attention_Company').checked) {
					attentionTo = document.getElementById("Attention_Company").value;
				}

				$.ajax({
					url: APIUrl + 'addCustomer',
					type: 'POST',
					dataType: 'JSON',
					beforeSend: function (xhr) { //Include the bearer token in header
						xhr.setRequestHeader("Authorization", token);
					},

					data: {
						"customerName": $("#Name").val(),
						"marketingOfficerId": $("#nameMarketingOfficer").val(),
						"packageId": $("#Package").val(),
						"status": $("#Status").val(),
						"entryDate": $("#EntryDate").val(),
						"newIC": $("#ICNo").val(),
						"oldIC": $("#OldICNo").val(),
						"dob": $("#DateOfBirth").val(),
						"gender": $("#Gender").val(),
						"phoneNumber": $("#MobilePhoneNo").val(),
						"customerEmail": $("#customerEmail").val(),
						"nextContactName": $("#NextContactName").val(),
						"nextContactRel": $("#NextContactRelationship").val(),
						"nextContactPhone": $("#NextContactPhoneNo").val(),
						"nextContactOfficePhone": $("#NextContactOfficePhoneNo").val(),
						"addr1": $("#HomeAddressLine1").val(),
						"addr2": $("#HomeAddressLine2").val(),
						"city": $("#HomeAddressCity").val(),
						"postCode": $("#HomeAddressPostCode").val(),
						"state": $("#HomeAddressState").val(),
						"homePhone": $("#HomePhoneNo").val(),
						"companyName": $("#CompanyName").val(),
						"position": $("#Position").val(),
						"officePhone": $("#OfficePhoneNo").val(),
						"faxNumber": $("#FaxPhoneNo").val(),
						"compAddr1": $("#CompanyAddressLine1").val(),
						"compAddr2": $("#CompanyAddressLine2").val(),
						"compCity": $("#CompanyAddressCity").val(),
						"compPostCode": $("#CompanyAddressPostCode").val(),
						"compState": $("#CompanyAddressState").val(),
						"CompanyPhoneNo": $("#CompanyPhoneNo").val(),
						"salary": $("#Salary").val(),
						"allowance": $("#Allowance").val(),
						"deduction": $("#Deduction").val(),
						"inTransit": $("#InTransit").val(),
						"amtBooked": $("#AmountBooked").val(),
						"payslipMonth": $("#PayslipMonth").val(),
						"installment": $("#Installment").val(),
						"eligibleDeduction": $("#EligibleDeduction").val(),
						"loanAppliedAmt": $("#LoanApplied").val(),
						"agentCommision": $("#AgentCommission").val(),
						"tenure": $("#Tenure").val(),
						"profitRate": $("#ProfitRate").val(),
						"approvalCode": $("#ApprovalCode").val(),
						"loanApprovedAmt": $("#LoanApproved").val(),
						"invoiceAmt": $("#InvoiceAmount").val(),
						"approvalDate": $("#ApprovalDate").val(),
						"netLoanApproved": $("#NetLoanApproved").val(),
						"settleOwnLoan": $("#SettleOwnLoan").val(),
						"marketingOfficerAdv": $("#MarketingOfficerAdvance").val(),
						"companyAdv": $("#CompanyAdvance").val(),
						"commissionDeductionAmt": $("#CommissionDeductionAmount").val(),
						"bankId": $("#Bank").val(),
						"bankInName": $("#BankInName").val(),
						"bankAcctNo": $("#AccountNo").val(),
						"bankInAmt": $("#BankInAmount").val(),
						"bankInDate": $("#BankInDate").val(),
						"chequeNo": $("#BankChequeNo").val(),
						"reconciliationDate": $("#ReconciliationDate").val(),
						"dateToBank": $("#DateToBank").val(),
						"bankRef": $("#BankReference").val(),
						"commissionDeductionSettlement": $("#CommissionDeductionSettlement").val(),
						"remarkContent": caseCreated,
						"userId": userId,
						"attentionTo": attentionTo,
						"jsonString_RedemptionCode": jsonString_RedemptionCode,
						"jsonString_RedemptionBankCoopOrg": jsonString_RedemptionBankCoopOrg,
						"jsonString_RedemptionDetails": jsonString_RedemptionDetails,
						"jsonString_RedemptionAmount": jsonString_RedemptionAmount,
						"jsonString_RedemptionExpiredDate": jsonString_RedemptionExpiredDate,
						"jsonString_RedemptionStatus": jsonString_RedemptionStatus,
					},

					//TODO:: CompanyPhoneNo, Attention_MarketingOfficer, Attention_Company
					// to do API.php user, createDateTime, completeUser, completeDateTime, attentionTo


					success: function (data) {
						alert(data.msg);
						if (stay == false) {
							window.location = "customer.html";
						}
						else {
							window.location = "add-customer.html";
						}
					},
					error: function (data) {
						alert("Add customer fail");
					}

				});
			}

			$(document).ready(function () {
				// Load datepicker
				require(['jquery', 'jqueryui'], function ($) {
					$(function () {
						var d = new Date().getDate();
						var m = new Date().getMonth() + 1; // JavaScript months are 0-11
						var y = new Date().getFullYear();
						$("[id$=EntryDate]").val(y + "-" + m + "-" + d);
						$("[id$=EntryDate]").datepicker({
							weekStart: 1,
							dateFormat: 'yy-mm-dd'
						});

						$(".datepicker").datepicker({
							changeMonth: true,
							changeYear: true,
							dateFormat: 'yy-mm-dd',
							yearRange: '1900:' + y
						});
					});
				});

				var MarketingOfficer = sessionStorage.getItem("name");
				var userId = sessionStorage.getItem("userId");

				function statusDropDown() {
					$.ajax({
						url: APIUrl + 'loanRdmpStatus',
						type: 'GET',
						dataType: 'JSON',
						beforeSend: function (xhr) { //Include the bearer token in header
							xhr.setRequestHeader("Authorization", token);
						},
						success: function (status) {
							statusDD = '<option value="0">- Select One -</option>';
							$.each(status, function (key, value) {

								statusDD += '<option value="' + value.code + '">' + value.description + '</option>';
							})
						},
					});

				}

				function getListofPackage() {
					$.ajax({
						url: APIUrl + 'getListofPackage',
						type: 'GET',
						dataType: 'JSON',
						beforeSend: function (xhr) { //Include the bearer token in header
							xhr.setRequestHeader("Authorization", token);
						},



						success: function (package) {


							packageDD =
								'<select onchange="getSelectedPackageData()" type="form-control custom-select" class="form-control" id="Package"' +
								' required> <option value="">Select package first</option>';

							$.each(package, function (key, value) {

								packageDD += '<option value="' + value.packageId + '"id="' + value.packageId + ' ">' + value.packageName +
									'</option>';
							})
							packageDD += '</select>';
							$("#ddPackage").html(packageDD);
						},
					});

				}

				function getListOfMO() {
					$.ajax({
						url: APIUrl + 'getListOfMO',
						type: 'GET',
						dataType: 'JSON',
						beforeSend: function (xhr) { //Include the bearer token in header
							xhr.setRequestHeader("Authorization", token);
						},



						success: function (MO) {


							MO_DD = '<option value="0">Select Marketing Officer first</option>';

							$.each(MO, function (key, value) {

								MO_DD += '<option  value="' + value.userId + '">' + value.name + '(' + value.userId + ')' + '</option>';
							})

							$("#nameMarketingOfficer").html(MO_DD);
						},
					});

				}
				getListofPackage();
				statusDropDown();
				getListOfMO();
			});
		});

	</script>
</body>

</html>